# Makefile
#############################################################################
#                                                                           #
#  Software    : TwT - GameEngine                                           #
#                                                                           #
#  Authors     : Gilles Steiner <gilles.steiner@gmail.com>                  #
#                Yannick Rochat <yannick.rochat@gmail.com>                  #
#                                                                           #
#############################################################################
#                                                                           #
# Default definitions -------------------------------------------------------
include Makefile.def

all: $(EXE) doc

.PHONY: clean doc

clean:
	@echo "+------------------------------------------------------------+"
	@echo "|         Cleaning src, binaries and documentation ...       |"
	@echo "+------------------------------------------------------------+"
	cd src ; make clean ; make cleandoc ; cd ..
	@echo "+------------------------------------------------------------+"
	@echo "|                      Done.                                 |"
	@echo "+------------------------------------------------------------+"

$(EXE): src/*.cpp src/*.h
	@echo "+------------------------------------------------------------+"
	@echo "|           Compiling and linking main sources ...           |"
	@echo "+------------------------------------------------------------+"
	@(cd src && $(MAKE) -j $(NTHREADS) $@)
	@echo "+------------------------------------------------------------+"
	@echo "|                      Done.                                 |"
	@echo "+------------------------------------------------------------+"

doc:
	@echo "+------------------------------------------------------------+"
	@echo "|    Generating automatic documentation with doxygen ...     |"
	@echo "+------------------------------------------------------------+"
	cd src ; make doc
	@echo "+------------------------------------------------------------+"
	@echo "|                      Done.                                 |"
	@echo "+------------------------------------------------------------+"
